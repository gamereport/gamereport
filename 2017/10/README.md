# 스터디 방향성 논의 및 게임 기초 인공지능

* 일시: 2017.10.28(토) 18:00
* 참석: 방재현, 김지수, 이인재, 박현서, 김우진, 강민수, 곽희주, 공병국, 정문기

## 목차

1. [스터디 주제](#스터디-주제)
2. [방향성에 대한 이야기](#방향성에-대한-이야기)
3. [게임 기초 인공지능](#게임-기초-인공지능)

## 스터디 주제

- 재미있는 게임이란?
> 재미있는 게임은 어떤 게임이고, 자신이 재미있게 느꼈던 게임들과 그 게임을 재미있게 느낀 이유
- 게임이 재미있는 이유
> 사람이 재미를 느끼는 요소와 그 이유에 대한 논의(With IGC2016 [재미의 심리학: 게이머의 재미를 중심으로])
- 무엇이 게임을 지속하게 하는가? (유저가 게임을 계속하는 이유)
> 온라인 또는 모바일 게임에서 게임을 질리지 않고, 계속 플레이하도록 만드는 요소와 이유는 무엇인가?
- 게임의 시점이 게임에 어떤 영향을 줄 수 있는가?
> 게임의 시점(Side, Top, Isometric / 1인칭, 3인칭)에 따라 유저가 느끼는 차이가 무엇이고, 이점은 무엇인가?
- 게임의 스토리텔링
> 문학(소설), 만화, 영상(영화, 애니메이션, 드라마)과 같은 다른 문화콘텐츠와 게임의 스토리텔링 비교
- 게임의 정의 및 특징
> 게임이 가지고 있는 특징에 따른 게임에 대한 정의
- '가챠 시스템'에 대해서
> 요즘 유행하고, 문제시되고 있는 가챠 시스템에 대한 논의 (With 스키너의 심리상자)
- 게임과 심리학
> 게임과 연관된 기초 심리학
- 특정 게임 분석
> 배틀그라운드, 소녀전선, 그 외의 게임
- PS4 게임 분석
> 부대에서 가능한 게임에 대한 분석
- 게임 기초 알고리즘
> 기획자가 설계하는 게임 알고리즘과 그 발전 과정 (FSM, FuSM, HFSM, BT)
- 레벨 디자인
> 게임의 플레이를 만드는 레벨 디자인, 기초적인 레벨 디자인 방법
- 개발 프로세스 (개발 방법론)

- 퀘스트의 한계점
>현재 게임의 주를 이루고 있는 퀘스트에 대한 분석과 그 한계점
- 그 외의 하고 싶은 스터디

## 방향성에 대한 이야기

> 스터디 내용, 목표, 목적, 방향성에 대한 논의

#### 이야기하고자하는 것들 [Game]

- 조금 더 좋은 방법으로 더 재미있는 게임을 만들기 위해서
- 게임에 대한 전반적인 것들
  > - 재미있게 즐겼던 게임부터 휴가나가서 할 게임에 대한 이야기도 좋습니다.  
  - 프로그래밍, 기획, 아트에 대한 전문적인 이야기도 좋습니다.  
  - 게임 경험에 대해서 공유하고, 문제점에 대해서 그리고 '이랬으면 어떨까?'에 대해 피드백을 받아도 됩니다.  
  - 다만, 그런 이야기들에 대해 조금 더 깊이 있게 이야기를 나누기를 원합니다.
- 깊이 있는 이야기를 통해 얻고자 하는 것들은 '안목'과 '통찰력'입니다.
 
#### 만들고 싶은 게임을 만들기 위해 [안목과 통찰력]

게임 개발자로서 자신이 만들고 싶은 게임을 만드는 것은 무척이나 매력적인 일이라고 생각합니다. 게임 개발자라면 누구나, 언젠가는 원하는 일이겠죠 언젠가 원하는 게임을 만들 기회가 있을 때, 또는 원하는 게임을 만들기 위해 '디렉터'가 되기 위해선 필요한 자질이라고 생각합니다.

**RPG게임에 자주 존재했던 '잡템'에 대해서 이야기 해봅시다.**

***'잡템'에 대해서 이야기를 하는 이유는,***  
게임 기획을 배울 때, 현업 게임 기획자 카페에서 잡템에 대해서 이해하지 못한 사람이 기획자를 해서는 안 된다는 글을 보았습니다. 처음에는 왜 그런지 이해가 안되었지만 통찰력과 관련된 이야기라는 것을 이제는 알았습니다.

***잡템이란 게 어떤 것인가요?***  
말하고자 하는 '잡템'은 활용가치가 없어, 단지 상점에 팔아서 돈으로 교환되는 가치만 있는 아이템입니다.

***잡템이 왜 존재할까요?***  
- 인벤트리를 채우는 것
> 작업장의 한계점을 만들어주는 것, 효율을 낮춰주는 것  
  손실회피라는 심리를 이용해 유저로 하여금 마을로 돌아가게 하는 것
- 게임 재화의 공급
- WOW에서는, 가방의 중요성을 만들어주는 것

***논리적으로 생각해보면***
1. 잡템은 인벤토리를 차지한다.
2. 잡템은 활용가치가 없다
3. 잡템은 돈으로 교환할 수 있다.
4. 잡템을 돈으로 교환하기 위해선 상점 NPC를 만나야한다.


----

## 게임 기초 인공지능

#### [1] 개요

시스템 기획자가 설계하는 인공지능에 대한 스터디. 신경망 이전까지는 다음과 같은 인공지능으로 발전되었다. 

> FSM → FuSM → HFSM → BT(Behavior Tree)

기획자의 인공지능 설계는 기획자가 의도한대로 오브젝트가 행동하도록 하는데 있으며, 개발 중에 오브젝트에 필요한 인공지능 수준에 따라 고전적인 형태의 FSM부터 가장 최근의 BT까지 사용할 수 있다. 가장 최근의 BT의 경우, Halo와 Spore 등의 게임에서 사용되었으며, 언리얼 엔진에서도 BT를 사용할 수 있도록 기능을 제공하고 있다.

#### [2] FSM (Finite State Machine)

> 게임 인공지능의 전통적인 방법, 고전적인 형태의 AI

**1. 요소**
- 현재 상태
- 출력 상태 (다음 단계의 상태)
- 입력
- 전이함수

**2. 특징**
- 유한한 개수의 상태
- 외부로부터의 입력
- 시간의 흐름에 따른 상태 변화
- 외부 입력에 따른 상태 변화
- 반드시 1개의 현재 상태

**3. 사용이유**
- 가능한 상태들을 명확히 규정
- 상태 중복 X
- 전이들을 명확히 규정
- 기계의 동작을 분명하게 규정
- 안정적인 작동

**4. 장점**
- 빠르게 코딩하기가 쉽다.
- 오류수정 용이
- 계산부담이 적음
- 직관적
- 유연성

**5. 단점**
- 상태가 많아짐에 따라 다이어그램 정리가 어렵고 외부 자극 처리가 복잡해짐
- 예측이 쉬워 게임의 재미가 떨어지고 게임의 난이도를 올리기 위해 FSM을 새로 확장해야 함
- 실제 개발 도중 FSM은 빈번하게 진화, 확장되거나 계층적 FSM으로 다시 설계

※Stack으로 구현하여 이전 상태로 전이하기 쉽게 만들기도 함

#### [3] FuSM (Fuzzy State Machine)

> FSM의 단점을 개선할 목적으로 퍼지 이론을 FSM의 상태 전이를 위한 조건 판단에 응용한 것  
상태의 입력, 출력에 퍼지 함수를 적용하여 랜덤 기능을 추가한 것
- 동일한 입력에도 다른 상태로 전이 가능
- 'Yes'/'No'의 이산적인 상태 대신 '그렇다'/'조금 그렇다'와 같은 상태 표현

**1. 사용이유**
- 추상적인 개념 표현
> - NPC로부터의 재미있는 반응, 예측하기 힘든 반응  
  - 같은 종류의 NPC, 몬스터에게서 다른 행동 패턴
- 게임의 효과를 신중하게, 사실감을 더 느끼는 효과

**Example**
> Near(200m), Close(500m), Far(700m)일때  
→ 550m일 때, 0.7: Close / 0.3: Far

#### [4] HFSM (Hierarchical Finite State Machine)

> FSM을 계층적으로 구현한 것

**1. 기존 FSM의 문제점**
- 유지보수
> 상태를 추가하거나 제거할 때, 새로운 것이나 기존의 것으로의 전이를 가진 모든 다른 상태들의 조건으로 수정해야 함
- 확장성
> 많은 상태를 가진 FSM은 가독성의 이점을 잃는다.
- 재사용성
> 조건이 상태 안에 있어 상태들의 연결이 강하다. 많은 프로젝트에서 같은 행동을 사용하기에는 현실적으로 불가능하다.

**2. HFSM 구현**

Super-State: 상태의 집합  
Gerneralized 전이: Super-state간의 전이

- 상속을 통해 계층을 만드는 것
- 클래스 상속은 하위 클래스를 새로운 환경에 적응시켜주고, 행동 상속은 새로운 행동을 추가하거나 기존의 행동을 오버라이딩하여 하위 상태들로 변형

**3. HFSM 문제**

- 전이를 재사용하는 것은 쉽지 않고, 많은 문맥을 위해 로직을 만들 때 많은 생각을 요구
- 직접 전이를 편집하는 것은 지루한 일

#### [5] Behavior Tree (Directed Acyclic Graph)

> FSM과 HFSM의 문제를 해결하기 위해 트리 구조로 개선한 것

**1. 기본구조**
- Root node
- Composite node ("Control Flow")
- Leaf node ("Execution")
- Decorator node ("Operator")

**2. Composite node**

> 복합 태스크, 여러 개의 자식으로 구성된 태스크. Node의 Flow를 제어하는 역할

- Selector
> 자식 노드 중 하나가 True를 반활할 때까지 실행
- Sequence
> 자식 노드 중 하나가 False를 반활할 때까지 실행
- Parallel node
> 자식 노드를 동시 실행

**3. Leaf node**
- Condition node
> 조건문의 처리  
  Ex) Missile Near? / Someone in Room?
- Action node
> 행동 처리  
  Ex) Play Music / Turn on the Lights
  
**4. Decorator node**

> 하나의 자식 노드만을 가지는 특별한 노드. 값을 반환하게 조종하거나 노드의 체크하는 획수를 변화하여 하위노드의 행동을 바꾸는 것이 목적  

조건을 만족하면 자식노드를 실행하고, 만족하지 않으면 False를 반환

- Repeater
- Inverter

**5. Node Values**
- SUCCESS
- FAILRUE
- RUNNING
- ERROR

**6. Issue**
- 트리 순회(Tree Traversal) 문제
> - Root 노트에서만 시작
  - 개발동안 확장하거나 개발됨에 따라 행동트리가 깊어질 때 효율적인 방법이 될 수 없음
 
  → 현재 실행중인 노드를 기억하여 트리 순회를 하지 않고 바로 확인할 수 있도록 개발
  
**7. Benefits**
- 유지보수
  >- BT에서의 전이는 상태에서의 조건이 아닌 구조로써 정의되어있다.
  - 노드가 서로 독립되어 설계되기 때문에, 새로운 노드를 추가하거나 삭제할 때 트리의 다른 부분을 바꿀 필요가 없다.
- 확장성
> BT가 많은 노드를 가질 때, 가독성을 유지하며 작은 하위 트리로 분리될 수 있다.
- 재사용성
> BT에서의 노드의 독립성 때문에, 하위트리도 독립적이다. 이것은 다른 트리나 프로젝트에서 노드나 하위트리를 재사용할 수 있게 된다.
